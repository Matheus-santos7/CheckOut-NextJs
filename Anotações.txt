DocumentaÃ§Ã£o: CriaÃ§Ã£o de Projeto com Next.js e Prisma

Passo 1: Criando o Projeto com Next.js

O Next.js Ã© um framework fullstack baseado em React que oferece renderizaÃ§Ã£o do lado do servidor (SSR), geraÃ§Ã£o estÃ¡tica (SSG) e outras funcionalidades otimizadas para aplicaÃ§Ãµes web modernas.

Para criar um novo projeto Next.js, execute o seguinte comando:

npx create-next-app@15.1.6 donalds

SaÃ­da esperada:

Need to install the following packages:
create-next-app@15.1.6
Ok to proceed? (y) y

Durante a configuraÃ§Ã£o, serÃ¡ feita uma sÃ©rie de perguntas para personalizar o projeto:

Would you like to use TypeScript? â†’ Recomendado escolher "Yes" para ter tipagem estÃ¡tica.
Would you like to use ESLint? â†’ "Yes" para manter boas prÃ¡ticas de cÃ³digo.
Would you like to use Tailwind CSS? â†’ "Yes" se desejar usar um framework de estilizaÃ§Ã£o rÃ¡pido.
Would you like your code inside a src/ directory? â†’ "Yes" para organizar melhor os arquivos do projeto.
Would you like to use App Router? (recommended) â†’ "Yes", pois Ã© o novo sistema de roteamento do Next.js.
Would you like to use Turbopack for next dev? â†’ "Yes" para um desempenho otimizado durante o desenvolvimento.
Would you like to customize the import alias (@/* by default)? â†’ "Yes" para facilitar importaÃ§Ãµes.

ApÃ³s responder as perguntas, o Next.js criarÃ¡ a estrutura do projeto dentro do diretÃ³rio donalds.

Estrutura do Projeto

ApÃ³s a instalaÃ§Ã£o, o diretÃ³rio conterÃ¡ a seguinte estrutura:

donalds/
â”œâ”€â”€ node_modules/
â”œâ”€â”€ public/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/  # DiretÃ³rio de pÃ¡ginas com o novo App Router
â”‚   â”œâ”€â”€ components/  # Componentes reutilizÃ¡veis
â”‚   â”œâ”€â”€ styles/  # EstilizaÃ§Ã£o do projeto
â”œâ”€â”€ .eslintrc.json  # ConfiguraÃ§Ã£o do ESLint
â”œâ”€â”€ .gitignore  # Arquivos ignorados pelo Git
â”œâ”€â”€ package.json  # DependÃªncias e scripts do projeto
â”œâ”€â”€ README.md  # DocumentaÃ§Ã£o do projeto
â””â”€â”€ tsconfig.json (se TypeScript for habilitado)

Executando o Projeto

Depois de criado, entre no diretÃ³rio do projeto:

cd donalds

Instale as dependÃªncias caso necessÃ¡rio:

npm install

Inicie o servidor de desenvolvimento:

npm run dev

O Next.js iniciarÃ¡ um servidor local e o projeto poderÃ¡ ser acessado em:

http://localhost:3000

Passo 2: Configurando Prisma

Prisma Ã© um ORM moderno para Node.js e TypeScript, utilizado para interagir com bancos de dados de forma simples e eficiente.

Instalando Prisma

Execute os seguintes comandos para instalar o Prisma e o client:

npm install prisma@6.2.1
npm install @prisma/client@6.2.1

Inicialize o Prisma no projeto:

npx prisma init

Isso criarÃ¡ um diretÃ³rio prisma/ com o arquivo schema.prisma, onde serÃ¡ definida a estrutura do banco de dados.

DefiniÃ§Ã£o dos Modelos no Prisma

Abaixo estÃ£o os modelos definidos no schema.prisma para o projeto:

model Restaurant {
  id        String      @id @default(uuid())
  name      String
  slug      String
  descripton    String
  avatarImageUrl      String
  coverImageUrl       String
  menuCategories MenuCategory[]
  products Product[]
  orders Order[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model MenuCategory {
  id        String      @id @default(uuid())
  name      String
  restaurant Restaurant @relation(fields: [restaurantId], references: [id])
  restaurantId String
  products Product[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Product {
  id        String      @id @default(uuid())
  name      String
  descripton    String
  price     Float
  imageUrl  String
  ingredients String
  restaurantId String
  resturant Restaurant @relation(fields: [restaurantId], references: [id])
  menuCategory MenuCategory @relation(fields: [menuCategoryId], references: [id])
  menuCategoryId String
  orderProducts OrderProduct[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Order {
  id        Int      @id @default(autoincrement())
  total     Float
  status     OrderStatus
  consumptionMethod ConsumptionMethod
  orderProducts OrderProduct[]
  restaurant Restaurant @relation(fields: [restaurantId], references: [id])
  restaurantId String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model OrderProduct {
  id        String      @id @default(uuid())
  product Product @relation(fields: [productId], references: [id])
  productId String
  order Order @relation(fields: [orderId], references: [id])
  orderId Int
  quantity Int
  price Float
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum OrderStatus {
  PENDING
  IN_PREPARATION
  CONFIRMED
  DELIVERED
  CANCELLED
  FINISHED
}

enum ConsumptionMethod {
  DELIVERY
  DINE_IN
}
ExplicaÃ§Ã£o das Tabelas e Recursos Utilizados

Restaurant: Representa um restaurante, armazenando informaÃ§Ãµes como nome, imagens, categorias do cardÃ¡pio, produtos e pedidos.

MenuCategory: Define categorias dentro do menu de um restaurante, relacionando-se diretamente com produtos e restaurantes.

Product: ContÃ©m informaÃ§Ãµes sobre um produto do cardÃ¡pio, incluindo nome, descriÃ§Ã£o, preÃ§o, imagem e ingredientes.

Order: Registra um pedido feito em um restaurante, armazenando total do pedido, status e mÃ©todo de consumo.

OrderProduct: Tabela intermediÃ¡ria que vincula produtos a pedidos, permitindo a gestÃ£o de quantidades e preÃ§os.

Enums OrderStatus e ConsumptionMethod: Enumeram os possÃ­veis estados de um pedido e os mÃ©todos de consumo.

Recursos Utilizados para RelaÃ§Ãµes

@relation: Define chaves estrangeiras entre tabelas. Exemplo: restaurantId em MenuCategory referencia um Restaurant.

@id @default(uuid()): Define identificadores Ãºnicos para registros, usando UUIDs para tabelas como Restaurant e Product.

@default(autoincrement()): Utilizado para IDs automÃ¡ticos em Order, garantindo valores sequenciais.

@updatedAt: Atualiza automaticamente o campo sempre que um registro Ã© modificado.

@default(now()): Define valores padrÃ£o como a data e hora de criaÃ§Ã£o do registro.

onDelete: Cascade: Deleta em cascada registro relacionados ao id relacionado, exemplo: tudo que for do restaurante X sera apagado nas demais tabelas referenciadas.

Formatando e Migrando o Banco de Dados

Formate o schema Prisma:

npx prisma format

Crie um banco no NeonDB e copie a URL de conexÃ£o para o arquivo .env do projeto.

Aplique as migraÃ§Ãµes para criar as tabelas no banco de dados:

npx prisma migrate dev

Populando o Banco de Dados (Seeding)

Instale o ts-node como dependÃªncia de desenvolvimento:

npm install -D ts-node@10.9.2

Adicione o script de seed no package.json:

"prisma": {
  "seed": "ts-node ./prisma/seed.ts"
}

Execute o comando para popular o banco:

npx prisma db seed

Agora o Prisma estÃ¡ configurado e pronto para uso no projeto.


ğŸ“Œ Roteamento no Next.js com App Router
No Next.js, ao utilizar o App Router, todos os arquivos dentro da pasta @app se tornam automaticamente rotas acessÃ­veis na aplicaÃ§Ã£o.

ğŸ› ï¸ Exemplo de Estrutura de DiretÃ³rios
plaintext
Copiar
Editar
src/
â””â”€â”€ app/
    â”œâ”€â”€ page.tsx       # Rota: "/"
    â”œâ”€â”€ about/
    â”‚   â”œâ”€â”€ page.tsx   # Rota: "/about"
    â”œâ”€â”€ contact/
    â”‚   â”œâ”€â”€ page.tsx   # Rota: "/contact"
ğŸ–¥ï¸ Como Funciona?
Cada pasta dentro de app/ representa um segmento da URL.
Arquivos page.tsx definem pÃ¡ginas acessÃ­veis via navegador.
O Next.js cuida automaticamente do roteamento sem necessidade de configuraÃ§Ãµes extras.
âœ… Exemplo de CÃ³digo
Criando uma pÃ¡gina "Sobre" (about/page.tsx):

tsx
Copiar
Editar
export default function AboutPage() {
  return (
    <main>
      <h1>Sobre NÃ³s</h1>
      <p>Bem-vindo Ã  pÃ¡gina sobre nosso projeto!</p>
    </main>
  );
}
ğŸ”— AcessÃ­vel em: http://localhost:3000/about

Dessa forma, com o App Router, o roteamento se torna mais intuitivo e organizado. ğŸš€


npx shadcn@2.3.0 init
Need to install the following packages:
shadcn@2.3.0
Ok to proceed? (y) y

âœ” Preflight checks.
âœ” Verifying framework. Found Next.js.
âœ” Validating Tailwind CSS.
âœ” Validating import alias.
âœ” Which style would you like to use? â€º Default
âœ” Which color would you like to use as the base color? â€º Neutral
âœ” Would you like to use CSS variables for theming? â€¦ no / yes
âœ” Writing components.json.
âœ” Checking registry.
âœ” Updating tailwind.config.ts
âœ” Updating src/app/globals.css
  Installing dependencies.

It looks like you are using React 19. 
Some packages may fail to install due to peer dependency issues in npm (see https://ui.shadcn.com/react-19).

âœ” How would you like to proceed? â€º Use --legacy-peer-deps
âœ” Installing dependencies.
âœ” Created 1 file:
  - src/lib/utils.ts

Success! Project initialization completed.
You may now add components.

matheus@matheus-note:~/Documentos/MatheusParticular/checkout/donalds$ 

